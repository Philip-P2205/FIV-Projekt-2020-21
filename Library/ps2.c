/*
 * ps2.c
 *
 *  Created on: 27.05.2021
 *      Author: jakob
 */
#include "ps2.h"

uint8_t *ps2_map = "????????????? `?" // 00-0F
+ "?????q1???zsaw2?" // 10-1F
        + "?cxde43?? vftr5?" // 20-2F
        + "?nbhgy6???mju78?" // 30-3F
        + "?,kio09??./l//p-?" // 40-4F
        + "??'?[=????\",$0a,\"]?\??" // 50-5F
        + "?????????1?47???" // 60-6F
        + "0.2568\",$1b,\"??+3-*9??" // 70-7F
        + "????????????????" // 80-8F
        + "????????????????" // 90-9F
        + "????????????????" // A0-AF
        + "????????????????" // B0-BF
        + "????????????????" // C0-CF
        + "????????????????" // D0-DF
        + "????????????????" // E0-EF
        + "????????????????" // F0-FF
        ;
uint8_t *ps2_map_shifted = "????????????? ~?" // 00-0F
        + "?????Q!???ZSAW@?" // 10-1F
        + "?CXDE#$?? VFTR%?" // 20-2F
        + "?NBHGY^???MJU&*?" // 30-3F
        + "?<KIO)(??>?L:P_?" // 40-4F
        + '??"?{+?????}?|??' // 50-5F + "?????????1?47???" // 60-6F
        + "0.2568???+3-*9??" // 70-7F
        + "????????????????" // 80-8F
        + "????????????????" // 90-9F
        + "????????????????" // A0-AF
        + "????????????????" // B0-BF
        + "????????????????" // C0-CF
        + "????????????????" // D0-DF
        + "????????????????" // E0-EF
        + "????????????????" // F0-FF
        ;

uint8_t ps2_states;

uint8_t ps2KeyboardChar(uint8_t scancode)
{
    if ((ps2_states & PS2_SHIFT_PRESSED_STATE) != 0)
    {
        return *(ps2_map_shifted + scancode);
    }
    else
    {
        return *(ps2_map + scancode);
    }
}
